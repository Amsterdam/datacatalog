

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Writing Plugins &mdash; datacatalog-core 0.1 documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://amsterdam.github.io/aiohttp_openapi_haljson/plugins.html"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="datacatalog-core 0.1 documentation" href="index.html"/>
        <link rel="next" title="JSON Schemas and OpenAPI definitions" href="schemas.html"/>
        <link rel="prev" title="Plugins" href="api/plugins.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> datacatalog-core
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api_docs.html">API Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/application.html">Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/handlers.html">Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/plugins.html">Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#interfaces">Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#default-plugins">Default Plugins</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Writing Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#plugin-initialization-and-tear-down">Plugin initialization and tear-down</a></li>
<li class="toctree-l2"><a class="reference internal" href="#default-plugins">Default Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#filestorageplugin">FileStoragePlugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inmemorysearchplugin">InMemorySearchPlugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="schemas.html">JSON Schemas and OpenAPI definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx_101.html">Sphinx 101</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sphinx_101.html#rest-formatting">ReST formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx_101.html#roles-added-by-sphinx">Roles added by Sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx_101.html#directives">Directives</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx_101.html#google-style-docstrings">Google-style docstrings</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx_101.html#autodoc">Autodoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx_101.html#intersphinx">Intersphinx</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="todo_list.html">Todo list</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="license.html#definitions">1. Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="license.html#contributor">1.1. “Contributor”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#contributor-version">1.2. “Contributor Version”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#contribution">1.3. “Contribution”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#covered-software">1.4. “Covered Software”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#incompatible-with-secondary-licenses">1.5. “Incompatible With Secondary Licenses”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#executable-form">1.6. “Executable Form”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#id1">1.8. “License”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#licensable">1.9. “Licensable”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#modifications">1.10. “Modifications”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#patent-claims-of-a-contributor">1.11. “Patent Claims” of a Contributor</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#secondary-license">1.12. “Secondary License”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#source-code-form">1.13. “Source Code Form”</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#you-or-your">1.14. “You” (or “Your”)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="license.html#license-grants-and-conditions">2. License Grants and Conditions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="license.html#grants">2.1. Grants</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#effective-date">2.2. Effective Date</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#limitations-on-grant-scope">2.3. Limitations on Grant Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#subsequent-licenses">2.4. Subsequent Licenses</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#representation">2.5. Representation</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#fair-use">2.6. Fair Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#conditions">2.7. Conditions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="license.html#responsibilities">3. Responsibilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="license.html#distribution-of-source-form">3.1. Distribution of Source Form</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#distribution-of-executable-form">3.2. Distribution of Executable Form</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#distribution-of-a-larger-work">3.3. Distribution of a Larger Work</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#notices">3.4. Notices</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#application-of-additional-terms">3.5. Application of Additional Terms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="license.html#inability-to-comply-due-to-statute-or-regulation">4. Inability to Comply Due to Statute or Regulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#termination">5. Termination</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#disclaimer-of-warranty">6. Disclaimer of Warranty</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#limitation-of-liability">7. Limitation of Liability</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#litigation">8. Litigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#miscellaneous">9. Miscellaneous</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#versions-of-the-license">10. Versions of the License</a><ul>
<li class="toctree-l3"><a class="reference internal" href="license.html#new-versions">10.1. New Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#effect-of-new-versions">10.2. Effect of New Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#modified-versions">10.3. Modified Versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="license.html#distributing-source-code-form-that-is-incompatible-with-secondary-licenses">10.4. Distributing Source Code Form that is Incompatible With Secondary Licenses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="license.html#exhibit-a-source-code-form-license-notice">Exhibit A - Source Code Form License Notice</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#exhibit-b-incompatible-with-secondary-licenses-notice">Exhibit B - “Incompatible With Secondary Licenses” Notice</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">datacatalog-core</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Writing Plugins</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/plugins.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="writing-plugins">
<span id="plugins"></span><h1>Writing Plugins<a class="headerlink" href="#writing-plugins" title="Permalink to this headline">¶</a></h1>
<p><strong>datacatalog-core</strong> has a pluggable architecture to facilitate extending its
functionality. Writing a plugin consists of the following two steps:</p>
<ol class="arabic">
<li><p class="first">Write a class that implements one or more of the pluggable interfaces. ATOW,
these are:</p>
<ul class="simple">
<li>searching (see <a class="reference internal" href="api/plugins.html#datacatalog.plugin_interfaces.AbstractSearchPlugin" title="datacatalog.plugin_interfaces.AbstractSearchPlugin"><code class="xref py py-class docutils literal"><span class="pre">AbstractSearchPlugin</span></code></a>)</li>
<li>storage (see <a class="reference internal" href="api/plugins.html#datacatalog.plugin_interfaces.AbstractStoragePlugin" title="datacatalog.plugin_interfaces.AbstractStoragePlugin"><code class="xref py py-class docutils literal"><span class="pre">AbstractStoragePlugin</span></code></a>)</li>
</ul>
<p>It’s recommended that your implementation inherits from the abstract
interface class it implements, <em>but this is not required</em>. If your class
implements all the methods of one or more interfaces, it is recognized
automatically.</p>
<p>The application will instantiate <em>one</em> instance of your plugin class, and
use this instance throughout its lifetime.</p>
</li>
<li><p class="first">Add the full path of your class to the <code class="docutils literal"><span class="pre">plugins</span></code> section of the
configuration file. For example, if your class lives at
<code class="docutils literal"><span class="pre">my.module.ElasticSearch</span></code>:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">plugins</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">datacatalog.default_plugins.datastore.FileStoragePlugin</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">my.module.ElasticSearch</span>
</pre></div>
</div>
</li>
</ol>
<div class="section" id="plugin-initialization-and-tear-down">
<h2>Plugin initialization and tear-down<a class="headerlink" href="#plugin-initialization-and-tear-down" title="Permalink to this headline">¶</a></h2>
<p>If your plugin needs to be initialized (eg. creating a database connection), you
have a few options. The simplest option is to do all initialization in the
constructor of your plugin class:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
        <span class="o">...</span>  <span class="c1"># Initialize your plugin here</span>

    <span class="c1"># One or more plugin interfaces:</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The constructor accepts a parameter <code class="docutils literal"><span class="pre">app</span></code>, which will be the current
<code class="xref py py-class docutils literal"><span class="pre">application</span> <span class="pre">&lt;datacatalog.application.Application</span></code>. This is optional.</p>
</div>
<p>The constructor is called <em>synchronously</em>, before the application’s event loop
is started, so it’s not trivial to call asynchronous initialization code from
here. If initializing your plugin entails some asynchronous calls (eg. because
the database connector has only an asynchronous API), the plugin can provide
asynchronous methods
<a class="reference internal" href="api/plugins.html#datacatalog.plugin_interfaces.AbstractPlugin.plugin_start" title="datacatalog.plugin_interfaces.AbstractPlugin.plugin_start"><code class="xref py py-meth docutils literal"><span class="pre">plugin_start()</span></code></a> and
<a class="reference internal" href="api/plugins.html#datacatalog.plugin_interfaces.AbstractPlugin.plugin_stop" title="datacatalog.plugin_interfaces.AbstractPlugin.plugin_stop"><code class="xref py py-meth docutils literal"><span class="pre">plugin_stop()</span></code></a> methods. These
will be called by the application at startup and teardown, while the event loop
is running.</p>
</div>
<div class="section" id="default-plugins">
<h2>Default Plugins<a class="headerlink" href="#default-plugins" title="Permalink to this headline">¶</a></h2>
<p><strong>datacatalog-core</strong> comes with “batteries included”: for each pluggable
interface, at least one implementation is part of the distribution. Currently,
the following implementations are provided:</p>
<div class="section" id="filestorageplugin">
<h3>FileStoragePlugin<a class="headerlink" href="#filestorageplugin" title="Permalink to this headline">¶</a></h3>
<p>Implements the <a class="reference internal" href="api/plugins.html#datacatalog.plugin_interfaces.AbstractStoragePlugin" title="datacatalog.plugin_interfaces.AbstractStoragePlugin"><code class="xref py py-class docutils literal"><span class="pre">AbstractStoragePlugin</span></code></a>
interface.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">documentation of what it does, configuration options</p>
</div>
<dl class="docutils">
<dt>See also:</dt>
<dd><a class="reference internal" href="api/plugins.html#datacatalog.default_plugins.file_storage.FileStoragePlugin" title="datacatalog.default_plugins.file_storage.FileStoragePlugin"><code class="xref py py-class docutils literal"><span class="pre">API</span> <span class="pre">documentation</span> <span class="pre">of</span> <span class="pre">FileStoragePlugin</span></code></a></dd>
</dl>
</div>
<div class="section" id="inmemorysearchplugin">
<h3>InMemorySearchPlugin<a class="headerlink" href="#inmemorysearchplugin" title="Permalink to this headline">¶</a></h3>
<p>Implements the <a class="reference internal" href="api/plugins.html#datacatalog.plugin_interfaces.AbstractSearchPlugin" title="datacatalog.plugin_interfaces.AbstractSearchPlugin"><code class="xref py py-class docutils literal"><span class="pre">AbstractSearchPlugin</span></code></a>
interface.</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">documentation of what it does, configuration options</p>
</div>
<dl class="docutils">
<dt>See also:</dt>
<dd><a class="reference internal" href="api/plugins.html#datacatalog.default_plugins.in_memory_search.InMemorySearchPlugin" title="datacatalog.default_plugins.in_memory_search.InMemorySearchPlugin"><code class="xref py py-class docutils literal"><span class="pre">API</span> <span class="pre">documentation</span> <span class="pre">of</span> <span class="pre">InMemorySearchPlugin</span></code></a></dd>
</dl>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="schemas.html" class="btn btn-neutral float-right" title="JSON Schemas and OpenAPI definitions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api/plugins.html" class="btn btn-neutral" title="Plugins" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Gemeente Amsterdam.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>